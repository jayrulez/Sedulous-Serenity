using System;
using Sedulous.Mathematics;
using Sedulous.Drawing;

namespace Sedulous.Drawing.Tests;

class PenTests
{
	[Test]
	public static void Constructor_ColorOnly_SetsDefaults()
	{
		let pen = scope Pen(Color.Red);

		Test.Assert(pen.Color == Color.Red);
		Test.Assert(pen.Thickness == 1.0f);
		Test.Assert(pen.LineCap == .Butt);
		Test.Assert(pen.LineJoin == .Miter);
		Test.Assert(pen.MiterLimit == 10.0f);
	}

	[Test]
	public static void Constructor_ColorAndThickness_SetsValues()
	{
		let pen = scope Pen(Color.Blue, 3.0f);

		Test.Assert(pen.Color == Color.Blue);
		Test.Assert(pen.Thickness == 3.0f);
	}

	[Test]
	public static void Constructor_Full_SetsAllValues()
	{
		let pen = scope Pen(Color.Green, 5.0f, .Round, .Bevel);

		Test.Assert(pen.Color == Color.Green);
		Test.Assert(pen.Thickness == 5.0f);
		Test.Assert(pen.LineCap == .Round);
		Test.Assert(pen.LineJoin == .Bevel);
	}

	[Test]
	public static void Clone_CreatesIdenticalPen()
	{
		let original = scope Pen(Color.Yellow, 2.5f, .Square, .Round);
		original.MiterLimit = 15.0f;

		let clone = original.Clone();
		defer delete clone;

		Test.Assert(clone.Color == Color.Yellow);
		Test.Assert(clone.Thickness == 2.5f);
		Test.Assert(clone.LineCap == .Square);
		Test.Assert(clone.LineJoin == .Round);
		Test.Assert(clone.MiterLimit == 15.0f);
	}

	[Test]
	public static void StaticPens_ReturnCorrectColors()
	{
		let black = Pen.Black();
		let white = Pen.White();
		let red = Pen.Red();
		let green = Pen.Green();
		let blue = Pen.Blue();

		defer delete black;
		defer delete white;
		defer delete red;
		defer delete green;
		defer delete blue;

		Test.Assert(black.Color == Color.Black);
		Test.Assert(white.Color == Color.White);
		Test.Assert(red.Color == Color.Red);
		Test.Assert(green.Color == Color.Green);
		Test.Assert(blue.Color == Color.Blue);
	}

	[Test]
	public static void StaticPens_WithThickness_SetsThickness()
	{
		let pen = Pen.Red(4.0f);
		defer delete pen;

		Test.Assert(pen.Thickness == 4.0f);
	}

	[Test]
	public static void MiterLimit_CanBeModified()
	{
		let pen = scope Pen(Color.Black);
		pen.MiterLimit = 20.0f;

		Test.Assert(pen.MiterLimit == 20.0f);
	}
}
